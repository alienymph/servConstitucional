<%- include('partials/header', { title: file.filename }) %>

<div class="container mt-4">
  <div class="row">

    <!-- ðŸ“„ PDF -->
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">

          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="mb-0"><%= file.filename %></h5>
            <div>
              <a class="btn btn-sm btn-outline-secondary"
                 href="/api/files/download/<%= file.gridFsId %>">
                Abrir
              </a>
              <a class="btn btn-sm btn-primary"
                 href="/api/files/download/<%= file.gridFsId %>"
                 download>
                Descargar
              </a>
            </div>
          </div>

          <iframe
            src="/api/files/download/<%= file.gridFsId %>"
            style="width:100%; height:75vh; border:0;">
          </iframe>

        </div>
      </div>
    </div>

    <!-- ðŸ§¾ METADATOS -->
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h6 class="mb-3">InformaciÃ³n</h6>

          <p><strong>Titular:</strong><br><%= file.titular || 'â€”' %></p>
          <p><strong>Cargo:</strong><br><%= file.cargo || 'â€”' %></p>
          <p><strong>Correo:</strong><br><%= file.correo || 'â€”' %></p>
          <p><strong>Apoderado:</strong><br><%= file.apoderado || 'â€”' %></p>
          <p><strong>Expediente:</strong><br>
            <% if (file.expediente) { %>
              <a href="<%= file.expediente %>" target="_blank">Ver enlace</a>
            <% } else { %>
              â€”
            <% } %>
          </p>

          <hr>

          <p><strong>Vigencia inicio:</strong><br>
            <%= file.vigenciaInicio
              ? new Date(file.vigenciaInicio).toLocaleDateString()
              : 'â€”' %>
          </p>

          <p><strong>Vigencia fin:</strong><br>
            <%= file.vigenciaFin
              ? new Date(file.vigenciaFin).toLocaleDateString()
              : 'â€”' %>
          </p>

          <p><strong>AÃ±o:</strong><br><%= file.anio || 'â€”' %></p>
          <p><strong>CÃ³digo:</strong><br><%= file.codigo || 'â€”' %></p>
          <p><strong>RFC:</strong><br><%= file.rfc || 'â€”' %></p>
          <p><strong>INE:</strong><br><%= file.ine || 'â€”' %></p>
          <p><strong>Nacionalidad:</strong><br><%= file.nacionalidad || 'â€”' %></p>
          <p><strong>Firma:</strong><br><%= file.firma || 'â€”' %></p>

        </div>
      </div>
    </div>

  </div>
</div>

<%- include('partials/footer') %>
